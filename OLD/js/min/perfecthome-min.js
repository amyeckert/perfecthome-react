$(document).ready(function(){function e(e){var t=e,n=document.createElement("textarea");n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.width="2em",n.style.height="2em",n.style.padding=0,n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",n.value=t,document.body.appendChild(n),n.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(n)}$(".js-input").val(""),window.location.hash="",$(".q1").hide(),$(".q2").hide(),$(".q3").hide(),$(".listings").hide(),$(".js-list1").hide(),$(".js-list2").hide(),$(".js-list3").hide(),$(".replay").hide(),$(".btn-reset").hide(),$(".share").hide(),$(".eliza").hide();var t=$(".q1"),n=$(".q2"),a=$(".q3"),i=($(".js-input"),/^[aeiou]/gi),o=/\bthe\b/gi,p=/[^a-z ]+$/gi,s=function(e){var t=!0;return e.match(p)&&(t=!1),t},l=function(){var e=!1;playerName=$(".firstName").val();var t="Pssst! What's your name?";if(playerName){if(s(playerName))return!0;e=!1,t="*Please use only letters, thanks!",$("#firstName").next().text(t)}else e=!1,$("#firstName").next().text(t);return e},r=function(){var e=[t,n,a],i=e[Math.floor(Math.random()*e.length)];$(".js-input").val(""),$(".enter-name").hide(),$(".firstName").empty().append($("input.firstName").val()),i==t?(window.location.hash="#q1",console.log("form #1 chosen")):i==n?(window.location.hash="#q2",console.log("form #2 chosen")):(window.location.hash="q3",console.log("form #3 chosen"))},m=function(){for(var e=($("body").find("form:visible").not("#name"),$("body").find(".js-input:visible").not("#firstName")),t=!0,n=0;n<e.length;n++){var a=$(e[n]).val(),i=$(e[n]).attr("id"),o=$(e[n]).data("error-msg"),p=$(e[n]).attr("type");if($("#"+i).next().text(""),""===a)$("#"+i).next().text("*"+o),t=!1;else{if("number"===p){var l=0,r=$(e[n]).attr("max"),m=parseInt(r,10),d=parseInt(a,10);d<l||d>m?(o="*Please pick a number in the correct range.",$("#"+i).next().text(o),t=!1):$("#"+i).next().text("")}"text"===p&&(s(a)?$("#"+i).next().text(""):(o="*Please use only letters, thanks!",$("#"+i).next().text(o),t=!1))}}return t},d=function(e,t){this.listing=t;var n=[{name:"firstName",value:playerName}],a=[{name:"listing",value:t}],i=e.serializeArray();i.unshift(n[0]),i.push(a[0]),$.ajax({type:"POST",url:"buildJson.php",data:i,success:function(){}})},u=function(){var t=$("input.adj2").val(),n=$(".adj2").prev();t.match(i)?(n.empty().text("an "),$(".adj2").empty().append(t).val()):(n.empty().text("a "),$(".adj2").empty().append(t).val());var a=$("input.water").val();a.match(o)?(a=a.replace(o,""),$(".water").empty().append(a).val()):$(".water").empty().append(a).val(),$(".firstName").empty().append($("input.firstName").val()),$(".adj1").empty().append($("input.adj1").val()),$(".favCountry").empty().append($("input.favCountry").val()),$(".bestie").empty().append($("input.bestie").val()),$(".noun1").empty().append($("input.noun1").val()),$(".noun2").empty().append($("input.noun2").val()),$(".favCartoon").empty().append($("input.favCartoon").val()),$(".prez").empty().append($("input.prez").val()),$(".gem").empty().append($("input.gem").val()),$(".basement").empty().append($("input.basement").val()),$(".tree").empty().append($("input.tree").val()),$(".num1").empty().append($("input.num1").val()),$(".favAnimal").empty().append($("input.favAnimal").val()),$(".verb1").empty().append($("input.verb1").val());var p=$("#questions1");$(".q1").hide(),$(window).scrollTop(0),$(".listings").show(),$(".js-list1").show(),$(".js-list2").hide(),$(".js-list3").hide();var s=$(".listing1").text();s=$.trim(s),d(p,s),e(s),$(".btn-reset").show(),$(".share").show(),$(".eliza").show();document.querySelector(".message").innerHTML="How about this little gem?"},c=function(){var t=$("#direction option:selected").text(),n=$("#landmark :selected").text();$(".firstName").empty().append($("input.firstName").val()),$(".num5").empty().append($("input.num5").val()),$(".adj3").empty().append($("input.adj3").val()),$(".num2").empty().append($("input.num2").val()),$(".num3").empty().append($("input.num3").val()),$(".num4").empty().append($("input.num4").val()),$(".emotion").empty().append($("input.emotion").val()),$(".direction").empty().append(t),$(".room").empty().append($("input.room").val()),$(".adj4").empty().append($("input.adj4").val()),$(".pubInst").empty().append($("input.pubInst").val()),$(".favCity").empty().append($("input.favCity").val()),$(".landmark").empty().append(n);var a=$("#questions2");$(".q2").hide(),$(window).scrollTop(0),$(".listings").show(),$(".js-list1").hide(),$(".js-list2").show(),$(".js-list3").hide();var i=$(".listing2").text();i=$.trim(i),d(a,i),e(i),$(".btn-reset").show(),$(".share").show(),$(".eliza").show();document.querySelector(".message").innerHTML="This one says YOU all over it!"},v=function(){var t=$("#time option:selected").text();$(".firstName").empty().append($("input.firstName").val()),$(".num6").empty().append($("input.num6").val()),$(".num7").empty().append($("input.num7").val()),$(".disaster").empty().append($("input.disaster").val()),$(".clothing").empty().append($("input.clothing").val()),$(".mood").empty().append($("input.mood").val()),$(".adj6").empty().append($("input.adj6").val()),$(".adj7").empty().append($("input.adj7").val()),$(".urban").empty().append($("input.urban").val()),$(".room2").empty().append($("input.room2").val()),$(".verb2").empty().append($("input.verb2").val()),$(".time").empty().append(t),$(".pluAnimals").empty().append($("input.pluAnimals").val()),$(".verb3").empty().append($("input.verb3").val());var n=$("#questions3");$(".q3").hide(),$(window).scrollTop(0),$(".listings").show(),$(".js-list1").hide(),$(".js-list2").hide(),$(".js-list3").show();var a=$(".listing3").text();a=$.trim(a),d(n,a),e(a),$(".btn-reset").show(),$(".share").show(),$(".eliza").show();document.querySelector(".message").innerHTML="Bring your toolbox!"};$(window).on("hashchange",function(e){var t=window.location.hash;"#q1"===t&&($(".q1").show(),$(".q2").hide(),$(".q3").hide(),$("body").css({"background-image":"url('img/tablebeast-sm.jpg')"}),$(".listings").hide()),"#q2"===t&&($(".q2").show(),$(".q1").hide(),$(".q3").hide(),$("body").css({"background-image":"url('img/couches-sm.jpg')"}),$(".listings").hide()),"#q3"===t&&($(".q3").show(),$(".q1").hide(),$(".q2").hide(),$("body").css({"background-image":"url('img/seam2-sm.jpg')"}),$(".listings").hide()),"#listing1"===t&&u(),"#listing2"===t&&c(),"#listing3"===t&&v()}),$("#name").on("submit",function(e){return e.preventDefault(),!!l()&&($(".js-input").val(""),void r())}),$("#btn-submit1").click(function(e){return e.preventDefault(),m()?($("#btn-submit1").next().text(""),window.location.hash="#listing1",console.log("form is valid"),void 0):($("#btn-submit1").next().text("*Please correct the errors, THEN call the movers."),console.log("form is not valid"),!1)}),$("#btn-submit2").click(function(e){return e.preventDefault(),m()?($("#btn-submit2").next().text(""),window.location.hash="#listing2",console.log("form is valid"),void 0):($("#btn-submit2").next().text("*Please correct the errors, THEN start packing."),console.log("form is not valid"),!1)}),$("#btn-submit3").click(function(e){return e.preventDefault(),m()?($("#btn-submit3").next().text(""),window.location.hash="#listing3",console.log("form is valid"),void 0):($("#btn-submit3").next().text("*Please correct the errors, THEN call the bank."),console.log("form is not valid"),!1)}),$(".js-copy-listing").click(function(t){t.preventDefault();var n=$(".listings > :visible");n=n[0],n=$.trim($(n).text()),e(n)});var h=function(e){"open"===e?$(".modal-container").fadeIn(function(){$("body").addClass("modal-on")}):$(".modal-container").fadeOut(function(){$("body").removeClass("modal-on")})};$(".js-modal-open").on("click",function(e){e.preventDefault(),h("open")}),$(".close").on("click",function(e){e.preventDefault(),h("close")});var y=new Date,f=y.getFullYear(),b=($("p.copyright").text(),"Â© "+f+" Amy Eckert");$("p.copyright").html(b)});